<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KOF Skill Animation Web Demo</title>
    <link rel="stylesheet" href="style.css">
    <link
        href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Inter:wght@300;400;600&display=swap"
        rel="stylesheet">
</head>

<body>
    <div class="game-container">
        <!-- Background Layer -->
        <div class="stage-bg"></div>

        <!-- Combat UI -->
        <div class="ui-layer">
            <div class="health-meta">
                <div class="player-info p1">
                    <div class="hp-bar-outer">
                        <div id="p1-hp" class="hp-bar-inner" style="width: 100%;"></div>
                    </div>
                    <div class="player-name">PLAYER 1</div>
                </div>

                <div class="timer-wrapper">
                    <div id="game-timer">99</div>
                </div>

                <div class="player-info p2">
                    <div class="hp-bar-outer">
                        <div id="p2-hp" class="hp-bar-inner" style="width: 100%;"></div>
                    </div>
                    <div class="player-name">PLAYER 2</div>
                </div>
            </div>
        </div>

        <!-- Canvas -->
        <canvas id="gameCanvas"></canvas>

        <!-- Overlays -->
        <div id="start-screen" class="start-overlay">
            <div class="selection-container">
                <div class="character-selection">
                    <div class="selection-column p1-select">
                        <h3>PLAYER 1</h3>
                        <div class="char-grid">
                            <div class="char-card active" data-id="RYO" onclick="selectCharacter(1, 'RYO')">
                                <img src="assets/textures/character.png"
                                    style="object-fit: none; object-position: 0 0; width: 64px; height: 64px; transform: scale(3);">
                                <span>RYO</span>
                            </div>
                            <div class="char-card" data-id="TECH" onclick="selectCharacter(1, 'TECH')">
                                <img src="assets/textures/character_tech.png"
                                    style="object-fit: none; object-position: 0 0; width: 64px; height: 64px; transform: scale(3);">
                                <span>TECH</span>
                            </div>
                        </div>
                    </div>

                    <div class="selection-column p2-select">
                        <h3>AI OPPONENT</h3>
                        <div class="char-grid">
                            <div class="char-card" data-id="RYO" onclick="selectCharacter(2, 'RYO')">
                                <img src="assets/textures/character.png"
                                    style="object-fit: none; object-position: 0 0; width: 64px; height: 64px; transform: scale(3);">
                                <span>RYO</span>
                            </div>
                            <div class="char-card active" data-id="TECH" onclick="selectCharacter(2, 'TECH')">
                                <img src="assets/textures/character_tech.png"
                                    style="object-fit: none; object-position: 0 0; width: 64px; height: 64px; transform: scale(3);">
                                <span>TECH</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="difficulty-section">
                    <h3>SELECT DIFFICULTY</h3>
                    <div class="difficulty-options">
                        <button onclick="startGame('EASY')">EASY</button>
                        <button onclick="startGame('MEDIUM')" class="active">MEDIUM</button>
                        <button onclick="startGame('HARD')">HARD</button>
                    </div>
                </div>

                <div class="control-hints">
                    <div class="hint-group">
                        <span class="hint-label">MOVE</span>
                        <div class="key-matrix">
                            <div class="key">W</div>
                            <div class="key-row">
                                <div class="key">A</div>
                                <div class="key">S</div>
                                <div class="key">D</div>
                            </div>
                        </div>
                    </div>
                    <div class="hint-group combat-group">
                        <span class="hint-label">COMBAT</span>
                        <div class="key-row">
                            <div class="key combat" data-label="PUNCH">J</div>
                            <div class="key combat" data-label="KICK">K</div>
                            <div class="key combat" data-label="SUPER">L</div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="control-hints">
                <div class="hint-group">
                    <span class="hint-label">MOVE</span>
                    <div class="key-matrix">
                        <div class="key">W</div>
                        <div class="key-row">
                            <div class="key">A</div>
                            <div class="key">S</div>
                            <div class="key">D</div>
                        </div>
                    </div>
                </div>
                <div class="hint-group combat-group">
                    <span class="hint-label">COMBAT</span>
                    <div class="key-row">
                        <div class="key combat" data-label="PUNCH">J</div>
                        <div class="key combat" data-label="KICK">K</div>
                        <div class="key combat" data-label="SUPER">L</div>
                    </div>
                </div>
            </div>
        </div>

        <div id="game-message" class="overlay-msg">READY?</div>

        <!-- Mobile Controller HUD (Visible only on touch devices) -->
        <div id="mobile-controls" class="mobile-hud">
            <div class="joystick-zone">
                <div id="btn-up" class="touch-btn directional">↑</div>
                <div class="row">
                    <div id="btn-left" class="touch-btn directional">←</div>
                    <div id="btn-right" class="touch-btn directional">→</div>
                </div>
            </div>
            <div class="action-zone">
                <div id="btn-punch" class="touch-btn action">P</div>
                <div id="btn-kick" class="touch-btn action">K</div>
                <div id="btn-super" class="touch-btn action">S</div>
            </div>
        </div>

        <div id="ko-overlay" class="ko-overlay">
            <div class="ko-content">
                <div class="ko-text">KO</div>

                <!-- Score Submission Section -->
                <div id="score-submission" style="display: none;">
                    <div class="score-summary">
                        BATTLE SCORE: <span id="final-score-val">0</span>
                    </div>
                    <input type="text" id="player-name-input" placeholder="ENTER YOUR NAME" maxlength="15">
                    <button class="submit-btn" onclick="submitMyScore()">REGISTER HONOR</button>
                </div>

                <!-- Leaderboard Section -->
                <div id="leaderboard-view" style="display: none;">
                    <h3>GLOBAL RANKINGS</h3>
                    <div id="leaderboard-list">
                        <!-- Rankings populated by JS -->
                    </div>
                </div>

                <div id="ko-actions">
                    <button class="restart-btn" onclick="location.reload()">RESTART BATTLE</button>
                </div>
            </div>
        </div>
    </div>
    <script type="module" src="game.js"></script>
</body>

</html>