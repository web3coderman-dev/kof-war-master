<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KOF Skill Animation Web Demo</title>
    <link rel="stylesheet" href="style.css">
    <link
        href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Inter:wght@300;400;600&display=swap"
        rel="stylesheet">
</head>

<body>
    <div class="game-container">
        <!-- Background Layer -->
        <div class="stage-bg"></div>

        <!-- Combat UI -->
        <div class="ui-layer">
            <!-- Player 1 HP/SP -->
            <div class="player-hud p1-hud">
                <div class="bar-container hp-container">
                    <div id="p1-hp" class="bar-fill"></div>
                </div>
                <div class="bar-container sp-container">
                    <div id="p1-sp" class="bar-fill sp-fill"></div>
                </div>
                <div class="player-name">RYO SAKAZAKI</div>
            </div>

            <!-- Timer -->
            <div id="timer" class="timer">90</div>

            <!-- Player 2 HP/SP -->
            <div class="player-hud p2-hud">
                <div class="bar-container hp-container">
                    <div id="p2-hp" class="bar-fill"></div>
                </div>
                <div class="bar-container sp-container">
                    <div id="p2-sp" class="bar-fill sp-fill"></div>
                </div>
                <div class="player-name">TECH-STRIKER</div>
            </div>
        </div>

        <!-- Canvas -->
        <canvas id="gameCanvas"></canvas>

        <!-- Overlays -->
        <div id="start-screen" class="start-overlay">
            <div class="selection-container">
                <div class="character-selection">
                    <div class="selection-column p1-select">
                        <h3 data-i18n="selection-title-p1">PLAYER 1</h3>
                        <div class="char-grid">
                            <div class="char-card active" data-id="RYO" onclick="selectCharacter(1, 'RYO')">
                                <img src="assets/textures/character.png"
                                    style="object-fit: none; object-position: 0 0; width: 64px; height: 64px; transform: scale(3);">
                                <span>RYO</span>
                            </div>
                            <div class="char-card" data-id="TECH" onclick="selectCharacter(1, 'TECH')">
                                <img src="assets/textures/character_tech.png"
                                    style="object-fit: none; object-position: 0 0; width: 64px; height: 64px; transform: scale(3);">
                                <span>TECH</span>
                            </div>
                        </div>
                    </div>

                    <div class="selection-column p2-select">
                        <h3 data-i18n="selection-title-p2">AI OPPONENT</h3>
                        <div class="char-grid">
                            <div class="char-card" data-id="RYO" onclick="selectCharacter(2, 'RYO')">
                                <img src="assets/textures/character.png"
                                    style="object-fit: none; object-position: 0 0; width: 64px; height: 64px; transform: scale(3);">
                                <span>RYO</span>
                            </div>
                            <div class="char-card active" data-id="TECH" onclick="selectCharacter(2, 'TECH')">
                                <img src="assets/textures/character_tech.png"
                                    style="object-fit: none; object-position: 0 0; width: 64px; height: 64px; transform: scale(3);">
                                <span>TECH</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="selection-footer">
                    <button class="guide-btn" onclick="toggleGuide(true)" data-i18n="btn-command-center">
                        <span class="icon">?</span> COMMAND CENTER [H]
                    </button>
                    <div class="difficulty-section">
                        <h3 data-i18n="difficulty-title">SELECT DIFFICULTY</h3>
                        <div class="difficulty-options">
                            <button onclick="startGame('EASY')" data-i18n="diff-easy">EASY</button>
                            <button onclick="startGame('MEDIUM')" class="active" data-i18n="diff-medium">MEDIUM</button>
                            <button onclick="startGame('HARD')" data-i18n="diff-hard">HARD</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Command Center Modal (v20.0) -->
        <div id="guide-modal" class="modal-overlay">
            <div class="modal-content">
                <button class="close-modal" onclick="toggleGuide(false)">&times;</button>

                <h2 class="modal-title" data-i18n="modal-title">TACTICAL COMMAND CENTER</h2>

                <div class="guide-grid">
                    <section class="guide-section">
                        <div class="section-header">
                            <span class="section-tag" data-i18n="guide-tag-core">CORE</span>
                            <h4 data-i18n="guide-title-move">MOVEMENT</h4>
                        </div>
                        <div class="key-matrix matrix-large">
                            <div class="key">W</div>
                            <div class="key-row">
                                <div class="key">A</div>
                                <div class="key">S</div>
                                <div class="key">D</div>
                            </div>
                        </div>
                        <p class="section-desc" data-i18n="guide-desc-move">Double tap <strong>A/D</strong> to Dash.
                            Press <strong>W</strong> for
                            Aerial Combat.</p>
                    </section>

                    <section class="guide-section">
                        <div class="section-header">
                            <span class="section-tag" data-i18n="guide-tag-offense">OFFENSE</span>
                            <h4 data-i18n="guide-title-combat">COMBAT MATRIX</h4>
                        </div>
                        <div class="key-row">
                            <div class="key combat" data-label="PUNCH">J</div>
                            <div class="key combat" data-label="KICK">K</div>
                            <div class="key combat" data-label="SUPER">L</div>
                        </div>
                        <p class="section-desc" data-i18n="guide-desc-combat">Combine <strong>S + D + J</strong> to
                            unleash hidden Special Moves.</p>
                    </section>
                </div>

                <div class="pro-tips">
                    <div class="tip-item">
                        <span class="tip-icon">üõ°Ô∏è</span>
                        <div>
                            <h5 data-i18n="tip-title-defense">ABSOLUTE DEFENSE</h5>
                            <p data-i18n="tip-desc-defense">Hold back while being attacked to minimize damage and build
                                SUPER meter.</p>
                        </div>
                    </div>
                    <div class="tip-item">
                        <span class="tip-icon">‚ö°</span>
                        <div>
                            <h5 data-i18n="tip-title-frame">FRAME REACTION</h5>
                            <p data-i18n="tip-desc-frame">Interrupt enemy animations with Light Punch (J) for Frame
                                Advantage.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="game-message" class="overlay-msg" data-i18n="msg-ready">READY?</div>

        <!-- Mobile Controller HUD (Visible only on touch devices) -->
        <div id="mobile-controls" class="mobile-hud">
            <div class="joystick-zone">
                <div id="btn-up" class="touch-btn directional">‚Üë</div>
                <div class="row">
                    <div id="btn-left" class="touch-btn directional">‚Üê</div>
                    <div id="btn-right" class="touch-btn directional">‚Üí</div>
                </div>
            </div>
            <div class="action-zone">
                <div id="btn-punch" class="touch-btn action">P</div>
                <div id="btn-kick" class="touch-btn action">K</div>
                <div id="btn-super" class="touch-btn action">S</div>
            </div>
        </div>

        <div id="ko-overlay" class="ko-overlay">
            <div class="ko-content">
                <div class="ko-text">KO</div>

                <!-- Score Submission Section -->
                <div id="score-submission" style="display: none;">
                    <div class="score-summary">
                        BATTLE SCORE: <span id="final-score-val">0</span>
                    </div>
                    <input type="text" id="player-name-input" placeholder="ENTER YOUR NAME" maxlength="15">
                    <button class="submit-btn" onclick="submitMyScore()">REGISTER HONOR</button>
                </div>

                <!-- Leaderboard Section -->
                <div id="leaderboard-view" style="display: none;">
                    <h3>GLOBAL RANKINGS</h3>
                    <div id="leaderboard-list">
                        <!-- Rankings populated by JS -->
                    </div>
                </div>

                <div id="ko-actions">
                    <button class="restart-btn" onclick="location.reload()">RESTART BATTLE</button>
                </div>
            </div>
        </div>
    </div>
    <script type="module" src="game.js"></script>
</body>

</html>